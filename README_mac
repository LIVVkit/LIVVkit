Information on how to run the Land Ice V&V (LIVV) post-processing software.
export DATA="data_mac"
KJE, AB, NM 9/2013

The /livv directory contains all the scripts and code to run the LIVV kit.
The mac_VV.bash script contains the inputs needed to run on a data processing style machine.
An example scripts for Carver (NERSC), Lens (OLCF), and Mac OSX (local) are provided.

Mac Packages:
	1. python
        2. py-netcdf4 @1.0.4_0
        3. py-numpy @1.7.1_0
        4. ncl/6.0.0 from source
        5. nco @4.3.4
        6. netcdf @4.2.1.1

Steps to install packages on the local Mac (best to use Macports insteading of loading them from source):

	1. udunits2 from source
        2. hdf5 from source
        3. netcdf4 from source
        4. nco from source
        5. download Mac OSX NCL binary for 10.7 (instructions listed below)

to install NCL go here:
<http://www.earthsystemgrid.org/dataset/ncl.612.0.html>, download the latest
Mac OSX binary for 10.7, even if you have 10.8, just pretend. Unpack it and
move it where you want it.
Set NCARG_ROOT to the NCL directory, and add
$NCARG_ROOT/bin to the PATH environment variable. Best to do those in your
.bashrc so you don't have to think about it again.

Filepaths for the python script are defined in the bash shell script, and most are required.

The command to run the python script along with all of the necessary/optional files is the last line of the script. 
/bin: the python processing code 
/plots: the ncl code 
/data: the solver data from each processed run is placed here in a $case.asc format 


To run the shell script (Mac OS X):

1. Place reg_test directory (taken from /tmp/proj/cli054/) on your mac, preferably place in some sort 
   of directory (ex. mac_run) which contains reg_test and livv. This will be the same directory as 
   specified as TEST_DIR in the master_build_mac.csh file. 

2. Change the TEST_FILEPATH to the path containing the livv kit. (^^ path to the directory mentioned above)

3. Change MY_PYTHON to wherever your python2.7 package exists on your mac.

4. Change the HTML_PATH to the location of the www directory. If it doesn't exist, specify the path to where
   you would like it and LIVV will check the path and create it if it is not already there.

5. Leave RUN_GIS=0 and RUN_ANT=0 in the mac_VV.bash script since production analysis will not be run locally.
   The flags are pre-set in the bash script for what will be analyzed on the mac.

6. Type "bash mac_VV.bash" at the command line in the main directory.

We have piped the NCL output to a file called plot_details.out. So if there is any concern over whether plots
formed correctly or not after inspecting the website, you can check in that file.

When you are done, the script tells you the website location to go look at the output.



TODOs (feel free to add to this as needed)

Major:
*plot the solver and convergence info more usefully for all relevant runs
*create a more general user interface to process the GIS production output
*enable the option to read from FELIX data (in exodus format) using visit

Minor:
*have the input and output information from the benchmark runs set in the software rather than the user 
specify (or at least have a default)
*parse more detailed data from the output files about the solver and preconditioner
n VV_outprocess
